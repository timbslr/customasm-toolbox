{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "customasm-assembly",
	"patterns": [
		{ "include": "#directives" },
		{ "include": "#labels" },
		{ "include": "#constants" },
		{ "include": "#types" },
		{ "include": "#blockComments" },
		{ "include": "#comments" },
		{ "include": "#strings" },
		{ "include": "#current" },
		{ "include": "#functions" }
	],
	"repository": {
		"blockComments": {
			"name": "comment.block.customasm-assembly",
			"begin": ";\\*",
			"end": "\\*;",
			"patterns": [ { "include": "#blockComments" } ]
		},
		"comments": {
			"patterns": [
				{
					"name": "comment.line.customasm-assembly",
					"match": ";.*$"
				}
			]
		},
		"strings": {
			"name": "string.quoted.double.customasm-assembly",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.customasm-assembly",
					"match": "\\\\."
				}
			]
		},
		"labels": {
			"patterns": [
				{
					"name": "entity.name.function.customasm-assembly",
					"match": "\\.*[a-zA-Z0-9_]+:\\s*$"
				},
				{
					"name": "entity.name.function.customasm-assembly",
					"match": "[a-zA-Z0-9_]+(\\.+[a-zA-Z0-9_]+)+|\\.+[a-zA-Z0-9_]+"
				}
			]
		},
		"directives": {
			"patterns": [
				{
					"name": "keyword.control.customasm-assembly",
					"match": "#const\\(noemit\\)"
				},
				{
					"name": "keyword.control.customasm-assembly",
					"match": "#(ruledef|subruledef|const|include|bits|addr|addr_end|outp|bits|fill|bankdef|bank|align|res|once|assert|fn|if|elif|else|d\\d*)\\b"
				}
			]
		},
		"types": {
			"patterns": [
				{
					"name": "storage.type.customasm-assembly",
					"match": "(u|s|i)\\d+"
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.numeric.customasm-assembly",
					"match": "0b[0-1]+|%(0|1)+|0o[0-7]+|0x[0-9a-fA-F]+|\\b\\d+\\b"
				}
			]
		},
		"current": {
			"patterns": [
				{
					"name": "entity.name.class.customasm-assembly",
					"match": "\\$|pc"
				}
			]
		},
		"functions": {
			"patterns": [
				{
					"match": "(asm)\\w*\\{.*?\\}",
					"captures": { "1": { "name": "entity.name.function.customasm-assembly" } }
				},
				{
					"match": "\\b(bankof|assert|sizeof|bankof|le|utf8|ascii|utf16be|utf16le|utf32be|utf32le|incbin|incbinstr|inchexstr)\\(.*\\)",
					"captures": { "1": { "name": "entity.name.function.customasm-assembly" } }
				}
			]
		}
	},
	"scopeName": "source.customasm-assembly"
}
